---
import type { Task } from '../lib/TaskList';
import type { Status } from '../lib/TaskList';
import Taskcard from './Taskcard.astro';
import Modal from './Modal.astro';

interface Props {
  status: Status;
}

const {status} = Astro.props;

const newTask: Task = {
  id: 401,
  title: "New Task",
  description: "This is a new task.",
  status: status,
};
---

<div class="bg-slate-100 rounded-lg p-4">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-base font-semibold">{status.value}</h2>
    <div class="flex gap-2">
      <label for={`task-${newTask.id}`} class="cursor-pointer">
        <i class="fa-solid fa-plus"></i>
      </label>
      <input type="checkbox" id={`task-${newTask.id}`} class="modal-toggle" />  
      <Modal task={newTask} hideStatus={true} />
    </div>
  </div>
  <Taskcard status={status}/>
</div>

<script>
  document.querySelectorAll("button[data-column]").forEach((button) => {
    button.addEventListener("click", () => {
      const taskTypeKey = button.getAttribute("data-column");
      if (taskTypeKey) {
        const modal = document.querySelector(`#modal-${taskTypeKey}`);
        if (modal instanceof HTMLDialogElement) {
          modal.showModal();
        }
      }
    });
  });
</script>
